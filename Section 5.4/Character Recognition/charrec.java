/*
ID: bwang101
LANG: JAVA
TASK: charrec
*/
import java.util.*;
import java.io.*;
public class charrec {
	
	static String ab = " abcdefghijklmnopqrstuvwxyz";
	
	static int N;
	
	static boolean[][][] font;
	static boolean[][] text;
	
	static int[][][] diff;
	static int[] minError;
	static String[] build;
	static boolean[] valid;
	
	static long start;
	
	String path;
	int error;

	public static void main(String[] args) throws IOException {
		BufferedReader in = new BufferedReader(new FileReader("charrec.in"));
		PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("charrec.out")));
		
		start = System.currentTimeMillis();
		
		N = Integer.parseInt(in.readLine());
		
		font = new boolean[27][20][20];
		text = new boolean[N][20];
		
		BufferedReader in2 = new BufferedReader(new FileReader("font.in"));
		
		in2.readLine();
		
		for(int i = 0; i < 27; i++)
		{
			for(int j = 0; j < 20; j++)
			{
				String g = in2.readLine();
				for(int k = 0; k < 20; k++)
					if(g.charAt(k) == '1')
						font[i][j][k] = true;
			}
		}
		
		in2.close();
		
		for(int i = 0; i < N; i++)
		{
			String g = in.readLine();
			for(int j = 0; j < 20; j++)
				if(g.charAt(j) == '1')
					text[i][j] = true;
		}
		
		diff = new int[N][27][20];
		
		for(int line = 0; line < N; line++)
		{
			for(int letter = 0; letter < 27; letter++)
			{
				for(int i = 0; i < 20; i++)
				{
					int temp = 0;
					for(int j = 0; j < 20; j++)
						if(text[line][j] ^ font[letter][i][j])
							temp++;
					diff[line][letter][i] = temp;
				}
			}
		}
		
		minError = new int[N+1];
		build = new String[N+1];
		valid = new boolean[N+1];
		
		Arrays.fill(minError, Integer.MAX_VALUE);
		minError[0] = 0;
		build[0] = "";
		valid[0] = true;
		
		charrec ans = get(N);
//		System.out.println(ans.error);
		out.println(ans.path);
		
//		System.out.println((System.currentTimeMillis() - start) + " milliseconds");
		
		in.close();
		out.close();

	}
	
	public charrec(String g, int val) {
		path = g; error = val;
	}
	
	static charrec get(int N) {
		if(N < 0)
			return new charrec("", Integer.MAX_VALUE);
		
		if(valid[N])
			return new charrec(build[N], minError[N]);
		
		valid[N] = true;
		
		charrec a = get(N-21);
		charrec b = get(N-20);
		charrec c = get(N-19);
		
		int ans = Math.min(a.error, Math.min(b.error, c.error));
		String temp = "?";
		
		if(ans == Integer.MAX_VALUE)
			return new charrec(null, ans);
		
		charrec errorA = get(N-21, N);
		charrec errorB = get(N-20, N);
		charrec errorC = get(N-19, N);
		
		if(errorA.path != null && a.path != null)
		{
			a.error += errorA.error;
			a.path += errorA.path;
		}
		
		if(errorB.path != null && b.path != null)
		{
			b.error += errorB.error;
			b.path += errorB.path;
		}
		
		if(errorC.path != null && c.path != null)
		{
			c.error += errorC.error;
			c.path += errorC.path;
		}
		
		ans = Integer.MAX_VALUE;
		
		if(a.error < ans)
		{
			ans = a.error;
			temp = a.path;
		}
		
		if(b.error < ans)
		{
			ans = b.error;
			temp = b.path;
		}
		
		if(c.error < ans)
		{
			ans = c.error;
			temp = c.path;
		}
		
		minError[N] = ans;
		build[N] = temp;
		
//		System.out.println("GetA: " + N + " = " + ans + ", \"" + temp + "\"");
		return new charrec(temp, ans);
	}
	
	static charrec get(int a, int b) {
		if(a < 0)
			return new charrec(null, Integer.MAX_VALUE);
		
		charrec result = new charrec("?", Integer.MAX_VALUE);
		
		if(b-a == 19)
		{
			for(int letter = 0; letter < 27; letter++)
			{
				int sum = Integer.MAX_VALUE;
				int sumA = 0;
				for(int i = 0; i < 19; i++) sumA += diff[a+i][letter][i];
				
				sum = Math.min(sumA, sum);
				
				for(int i = 0; i < 19; i++)
				{
					sumA -= diff[a+18-i][letter][18-i];
					sumA += diff[a+18-i][letter][19-i];
					sum = Math.min(sumA, sum);
				}
				
				if(sum < result.error)
				{
					result.error = sum;
					result.path = String.valueOf(ab.charAt(letter));
				}
			}
		}
		else if(b-a == 20)
		{
			for(int letter = 0; letter < 27; letter++)
			{
				int sum = 0;
				for(int line = a; line < b; line++)
					sum += diff[line][letter][line-a];
				
				if(sum < result.error)
				{
					result.error = sum;
					result.path = ab.substring(letter, letter+1);
				}
			}
		}
		else
		{
			for(int letter = 0; letter < 27; letter++)
			{
				int sum = Integer.MAX_VALUE;
				int sumA = 0;
				for(int i = 0; i < 20; i++) sumA += diff[a+i][letter][i];
				
				sum = Math.min(sumA, sum);
				
				for(int i = 0; i < 20; i++)
				{
					sumA -= diff[a+19-i][letter][19-i];
					sumA += diff[a+20-i][letter][19-i];
					sum = Math.min(sumA, sum);
				}
				
				if(sum < result.error)
				{
					result.error = sum;
					result.path = String.valueOf(ab.charAt(letter));
				}
			}
		}
		return result;
	}

}
/*
Submission #8!!! 5/13/2018 11:05 AM
38
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000110000000
00001111111111100000
00001110000110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001110000110000000
00001110000110000000
00000100000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000110000000
00000000000110000000
00000000011110000000
00000001111110000000
00000111111110000000
00001111000110000000
00000111111110000000
00000001111110000000
00000000011110000000
00000000000110000000
00000000000110000000
00000000000000000000
00000000000000000000
00000000000000000000

tv

38
01010001010101010101
10001000101010100010
00010101000100000100
10101000100010001010
00000000000000000000
10100000000000000000
01000000000110000001
10101111111111100000
01001110000110000001
10101100000110000010
01001100000110000101
10101100000110000000
01001110000110000101
10001110000110000000
01000100000000000101
10101010101010001010
00000000000000000101
10001010101010001000
00010001010000010100
10101010001000100000
01010100010101010001
10100010001000100000
01010101010100010001
10100000000000100010
01010000000110010001
00100000000110100010
01010000011110010001
10100001111110100000
01010111111110000001
10101111000110001000
01010111111110010001
10100001111110100000
01010000011110010101
10100000000110100000
01000000000110010101
10100000000000000010
10100010000000001010
01010101010101010101

tv


563
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000111100100000000
00001111101110000000
00001101111110000000
00001100110110000000
00001100110110000000
00001100110110000000
00001110110110000000
00001111111110000000
00001111111110000000
00001111111100000000
00001100000000000000
00001100000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00001100000000111000
00001100000000111000
00001111111111111000
00001111111111111000
00001111111111111000
00001110001110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001100001110000000
00000110001100000000
00000111111100000000
00000011111000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000011111000000000
00000111111100000000
00001110001110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001110011110000000
00000110011110000000
00000100011110000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000011111000000000
00000111111100000000
00001110001110000000
00001100000110000000
00001100000110110000
00001100000110110000
00001100000110110000
00001110001110110000
00001111111111111000
00001111111111111000
00001100000000000000
00001100000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000011111000000000
00000111111100000000
00001110111100000000
00001110110110000000
00001100110110000000
00001100110110000000
00001100110110000000
00001110111100000000
00000110111000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00001000000100000000
00001100000110000000
00001100000110000000
00001111111111110000
00001111111111111000
00001100000110011000
00001100000110011000
00001100000110011000
00001100000110111000
00001100000110111000
00000000000000010000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00100011111000000000
01110111111100000000
01101110001110000000
01101100000110000000
01101100000110000000
01101100000110000000
01111110001110000000
01111110001110000000
00111111111110000000
00111111111110000000
00000000000110000000
00000000000110000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00001100000000111000
00001100000000111000
00001111111111111000
00001111111111111000
00001100001110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001111111110000000
00001111111100000000
00001100000000000000
00001100000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00001100000000000000
00001100000110000000
00001100000110000000
00001100000110111000
00001111111110111000
00001111111110111000
00001111111110111000
00001100000000000000
00001100000000000000
00001100000000000000
00001100000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00100000000100000000
01100000000110000000
01100000000110000000
01100000000110000000
01100000000110000000
01110000000110111000
01110000000110111000
00111111111110111000
00011111111110111000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00001000000000010000
00001100000000111000
00001111111111111000
00001111111111111000
00000000110000000000
00000000110110000000
00000000110110000000
00000001111110000000
00001111001110000000
00001110001110000000
00001100000110000000
00001100000110000000
00001100000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00001100000000010000
00001100000000110000
00001100000000110000
00001100000000110000
00001100000000110000
00001111111111111000
00001111111111111000
00001100000000000000
00001100000000000000
00001100000000000000
00001100000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00001000000100000000
00001100000110000000
00001111111110000000
00001111111110000000
00001000000110000000
00001100001110000000
00001111111110000000
00001111111110000000
00001111111110000000
00001100001110000000
00001000000110000000
00001111111110000000
00001111111100000000
00001100000000000000
00001100000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00001100000110000000
00001100000110000000
00001111111110000000
00001111111110000000
00001100001110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001111111110000000
00001111111100000000
00001100000000000000
00001100000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000011111000000000
00000111111100000000
00001110001110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001110001110000000
00000111111100000000
00000011111000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
01100000000110000000
01100000000110000000
01111111111110000000
01111111111110000000
01101110001110000000
01101110001110000000
01101100000110000000
01101100000110000000
00001100000110000000
00001110001110000000
00000111111100000000
00000011111000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000011111000000000
00000111111100000000
00001110001110000000
00001100000110000000
01101100000110000000
01101100000110000000
01101110001110000000
01101110001110000000
01111111111110000000
01111111111110000000
01100000000110000000
01100000000110000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00001100000110000000
00001100000110000000
00001111111110000000
00001111111110000000
00001100011100000000
00001100001100000000
00001100001100000000
00001100001110000000
00001100000110000000
00001000001110000000
00000000001110000000
00000000000100000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00001000000000000000
00001111011100000000
00001111111110000000
00001101110110000000
00001101110110000000
00001101110110000000
00001101110110000000
00001101110110000000
00001101111110000000
00000111101110000000
00000111001100000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000110000000
00000111111111100000
00001111111111100000
00001110000110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001100000110000000
00001110000110000000
00001110000110000000
00000100000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000110000000
00000000000110000000
00000111111110000000
00001111111110000000
00001100000000000000
00001100000000000000
00001100000110000000
00001110000110000000
00001110000110000000
00001111111110000000
00001111111110000000
00001100000000000000
00001100000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000110000000
00000000000110000000
00000000011110000000
00000001111110000000
00000111111110000000
00001111000000000000
00001111000110000000
00001111000110000000
00000111111110000000
00000001111110000000
00000000011110000000
00000000000110000000
00000000000110000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000110000000
00000000000110000000
00000000111110000000
00000111111110000000
00001111100110000000
00001111100000000000
00000011111100000000
00000011111100000000
00001111100000000000
00000111111110000000
00000000111110000000
00000000000110000000
00000000000110000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00001100000110000000
00001100000110000000
00001110001110000000
00001111011110000000
00001111111110000000
00000001110000000000
00000001110000000000
00000001110000000000
00001111111110000000
00001111011110000000
00001110001110000000
00001100000110000000
00001100000110000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
01100000000110000000
01100000000110000000
01100000011110000000
01100001111110000000
01111111110110000000
01111111110110000000
01111111000000000000
01101111000000000000
01000011110110000000
00000001111110000000
00000000011110000000
00000000000110000000
00000000000110000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00001100000000000000
00001110011110000000
00001111011110000000
00001111000110000000
00001101100110000000
00001100110110000000
00001100011110000000
00001100011110000000
00001111001110000000
00001111000110000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000
00000000000000000000

 abcdefghijklmnopqrstuvwxyz
*/
